(()=>{"use strict";var t=[function(t,e,n){var a=this&&this.t||function(t){return t&&t.i?t:{default:t}};Object.defineProperty(e,"i",{value:!0});const i=a(n(1));new class{constructor(){this.o()}o(){new i.default}}},(t,e)=>{Object.defineProperty(e,"i",{value:!0});e.default=class{l=document.querySelector("#editor");h=document.querySelector("#initial-paragraph");constructor(){this.u()}u(){this.p(),this.l.addEventListener("beforeinput",(t=>{switch(t.inputType){case"deleteContentBackward":this.v(t);break;case"insertParagraph":this.m(t)}}))}p(){new MutationObserver((t=>{for(const e of t){if("characterData"!==e.type&&"childList"!==e.type)return;0!==this.l.innerText?.length?this.h.setAttribute("data-empty",""):this.h.removeAttribute("data-empty")}})).observe(this.l,{subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})}v(t){const e=t.getTargetRanges();if(1===e.length)this.P(t,e[0]);else for(const t of e)console.info("[Backwards deletion]:",t)}P(t,e){const n=this.k(e.startContainer),a=this.k(e.endContainer),i=this.k(n).isSameNode(this.h),s=e.startOffset;if(n.isEqualNode(a)){const n=e.endOffset-s,a=this.h.innerText;i&&a.length===n&&(t.preventDefault(),this.h.innerHTML="")}else i&&0===s&&setTimeout((()=>{this.h.innerHTML=""}))}m(t){const e=t.getTargetRanges();if(1===e.length)this.D(t,e[0]);else for(const t of e)console.info("[Paragraph Insertion]",t)}D(t,e){t.preventDefault();const n=window.getSelection();if(!n)return;const a=e.startContainer,i=new Range;i.setStart(a,e.startOffset),i.setEnd(e.endContainer,e.endOffset),i.deleteContents();const s=document.createElement("p"),r=this.k(a),o=new Range;if(null===r.lastChild){const t=document.createElement("br");s.appendChild(t)}else{o.setStart(a,e.startOffset),o.setEndAfter(r.lastChild);const t=o.extractContents();if(null===t.textContent||0===t.textContent.length){const t=document.createElement("br");s.appendChild(t)}else t.childNodes.forEach((t=>{s.appendChild(t)}))}r.insertAdjacentElement("afterend",s),o.setStartBefore(s),o.setEndBefore(s),n.removeAllRanges(),n.addRange(o),s.scrollIntoView({behavior:"instant",B:"center",I:"center"})}k(t){let e=t;for(;null!==e.parentNode&&!e.parentNode.isEqualNode(this.l);)e=e.parentNode;return e}}}],e={};(function n(a){var i=e[a];if(void 0!==i)return i.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,n),s.exports})(0)})();